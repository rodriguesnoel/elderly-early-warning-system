<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Early Warning System for Elderly Residents</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
  <h1>Early Warning System for Elderly Residents</h1>
  <p>Select current sensor readings to predict activity level and receive actionable guidance.</p>

  <form id="sensorForm">
    <div class="form-group">
      <label for="Temperature">Temperature</label>
      <select id="Temperature" name="Temperature" required>
        <option value="">Select range</option>
        <option value="Below 12°C - Dangerously Cold">Below 12°C - Dangerously Cold</option>
        <option value="12–20°C - Cold">12–20°C - Cold</option>
        <option value="20–26°C - Cool">20–26°C - Cool</option>
        <option value="26–30°C - Normal">26–30°C - Normal</option>
        <option value="30–34°C - Warm">30–34°C - Warm</option>
        <option value="34–40°C - Hot">34–40°C - Hot</option>
        <option value="Above 40°C - Dangerously Hot">Above 40°C - Dangerously Hot</option>
      </select>
    </div>

    <div class="form-group">
      <label for="Humidity">Humidity</label>
      <select id="Humidity" name="Humidity" required>
        <option value="">Select range</option>
        <option value="Below 20% - Dangerously Dry">Below 20% - Dangerously Dry</option>
        <option value="20–40% - Dry">20–40% - Dry</option>
        <option value="40–60% - Comfortable">40–60% - Comfortable</option>
        <option value="60–80% - Humid">60–80% - Humid</option>
        <option value="Above 80% - Dangerously Humid">Above 80% - Dangerously Humid</option>
      </select>
    </div>

    <div class="form-group">
      <label for="CO2_InfraredSensor">CO₂ Infrared Sensor</label>
      <select id="CO2_InfraredSensor" name="CO2_InfraredSensor" required>
        <option value="">Select level</option>
        <option value="0–50 - Very Low">0–50 - Very Low</option>
        <option value="50–125 - Moderate">50–125 - Moderate</option>
        <option value="125–200 - High">125–200 - High</option>
        <option value="200–250 - Very High">200–250 - Very High</option>
      </select>
    </div>

    <div class="form-group">
      <label for="CO2_ElectroChemicalSensor">CO₂ ElectroChemical Sensor (ppm)</label>
      <select id="CO2_ElectroChemicalSensor" name="CO2_ElectroChemicalSensor" required>
        <option value="">Select level</option>
        <option value="400–600 - Normal">400–600 - Normal</option>
        <option value="600–800 - Slightly Elevated">600–800 - Slightly Elevated</option>
        <option value="800–1000 - Elevated">800–1000 - Elevated</option>
        <option value="1000–1500 - High">1000–1500 - High</option>
        <option value="1500–2000 - Very High">1500–2000 - Very High</option>
      </select>  
    </div>

    <div class="form-group">
      <label for="MetalOxideSensor_Unit3">Metal Oxide Sensor Unit3</label>
      <select id="MetalOxideSensor_Unit3" name="MetalOxideSensor_Unit3" required>
        <option value="">Select level</option>
        <option value="0–200 - Low">0–200 - Low</option>
        <option value="200–500 - Moderate">200–500 - Moderate</option>
        <option value="500–800 - High">500–800 - High</option>
        <option value="800–1000 - Very High">800–1000 - Very High</option>
        <option value="nan">No Reading - Sensor Off/Down</option>
      </select>
    </div>

    <div class="form-group">
      <label for="CO_GasSensor">CO Gas Sensor</label>
      <select id="CO_GasSensor" name="CO_GasSensor" required>
        <option value="">Select level</option>
        <option value="Low">Low</option>
        <option value="Medium">Medium</option>
        <option value="High">High</option>
        <option value="unknown">Unknown</option>
      </select>
    </div>

    <div class="form-group">
      <label for="HVAC_Operation_Mode">HVAC Operation Mode</label>
      <select id="HVAC_Operation_Mode" name="HVAC_Operation_Mode" required>
        <option value="">Select mode</option>
        <option value="heating active">Heating Active</option>
        <option value="cooling active">Cooling Active</option>
        <option value="fan only">Fan Only</option>
        <option value="off">Off</option>
      </select>
    </div>

    <div class="form-group">
      <label for="Ambient_Light_Level">Ambient Light Level</label>
      <select id="Ambient_Light_Level" name="Ambient_Light_Level" required>
        <option value="">Select level</option>
        <option value="dim">Dim</option>
        <option value="normal">Normal</option>
        <option value="bright">Bright</option>
        <option value="unknown">Unknown</option>
      </select>
    </div>

    <button type="submit">Predict Activity Level</button>
  </form>

  <!-- Results and Action Guidance -->
  <div id="result" style="display: none;">
    <strong>Prediction:</strong> <span id="prediction"></span><br />
    <strong>Confidence:</strong> <span id="confidence"></span>
    <div id="confidence-gauge" style="width: 80%; height: 50px; margin: 10px 0;"></div><br />

    <div id="action">
      <strong>Action:</strong><br />
      <span id="action-text"></span>
    </div>

    <hr style="margin: 20px 0; border: 1px dashed #ccc;" />

    <!-- Chart Containers -->
    <div class="chart-container">
      <h3>What Influenced This Prediction?</h3>
      <div id="importance-chart" style="width: 100%; height: 250px;"></div>
    </div>

    <div class="chart-container" style="margin-top: 20px;">
      <h3>How Common Are Activity Levels?</h3>
      <div id="class-dist-chart" style="width: 100%; height: 250px;"></div>
    </div>
  </div>

  <!-- Load Plotly.js (CDN) -->
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

  <!-- JavaScript -->
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>